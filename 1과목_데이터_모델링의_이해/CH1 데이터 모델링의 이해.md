# 데이터 모델링의 이해

## 모델링이란?
**데이터베이스의 모델링은 현실세계를 단순화하여 표현하는 기법이다.**

## 모델링의 특징

**데이터베이스의 모델링은 현실세계를 추상화, 단순화, 명확화 하기 위해 일정한 표기법에 의해 표현하는 기법이다.**  
데이터 모델링을 할 때 지양해야 할 점 `중복` `비유연성` `비일관성`


`추상화`: 현실세계를 일정한 형식으로 표현하는 것  
`단순화`: 복잡한 현실 세계를 정해진 표기법으로 단순하고 쉽게 표현한다는 의미  
`명확화`: 불분명함을 제거하고 명확하게 해석할 수 있도록 기술한다는 의미  

## 모델링의 세 가지 관점

`데이터 관점(What)`  
데이터 위주의 모델링, 어떤 데이터들이 어떤 업무와 얽혀 있는지, 그리고 그 데이터 간에는 어떤 관계가 있는지에 대해서 모델링하는 방법

`프로세스 관점(How)`  
프로세스 위주의 모델링, 이 업무가 실제로 처리하고 있는 일은 무엇인지 또는 앞으로 처리해야 하는 일은 무엇인지를 모델링하는 방법

`데이터와 프로세스의 상관 관점`  
데이터와 프로세스의 관계를 위주로 한 모델링이라고 할 수 있다.  
프로세스의 흐름에 따라 데이터가 어떤 영향을 받는지 모델링하는 방법



## 모델링의 세 가지 단계

`개념적 데이터 모델링`  
전사적 데이터 모델링 수행시 행해지며 추상화 레벨이 가장 높은 모델링이다.  
이 단계에서는 업무 중심적이고 포괄적인 수준의 모델링이 진행된다.

`논리적 데이터 모델링`  
재사용성이 가장 높은 모델링으로 데이터베이스 모델에 대한 Key, 속성, 관계 등을 모두 표현하는 단계이다. 

`물리적 데이터 모델링`  
실제 데이터베이스로 구현할 수 있도록 성능이나 가용성 등의 물리적인 성격을 고려하여 모델을 표헌하는 단계이다. 

## 데이터의 독립성
`ANSI-SPARC`: 데이터 베이스 관리 시스템(DBMS)의 추상적인 설계 표준  
ANSI-SPARC는 스키마를 3단계 구조로 분리한다.  
목적은 데이터베이스에 대한 사용자들의 관점과 데이터베이스가 실제로 표현되는 물리적인 방식을 분리하기 위함


### **3단계 스키마 구조**  
`외부 스키마`  
사용자 관점: Multiple User's View 단계로 각 사용자가 보는 데이터베이스의 스미카를 정의한다. 

`개념 스키마`  
통합된 관점: Community View of DB 단계로 모든 사용자가 보는 데이터베이스의 스키마를 통합하여 전체 데이터베이스를 나타내는 것이다.  
데이터베이스에 저장되는 데이터들을 표현하고 데이터들 간의 관계를 나타낸다. 

`내부 스키마`  
물리적인 관점: Physical Representation 단계로 물리적인 저장 구조를 나타낸다.  
실질적인 데이터의 저장 구조나 컬럼 정의, 인덱스 등이 포함된다.


### **3단계 스키마 구조가 보장하는 독립성**
`논리적 독립성`  
개념 스키마가 변경되어도 외부 스키마는 영향받지 않는다. 

`물리적 독립성`  
내부 스키마가 변경되어도 외부/개념 스키마는 영향받지 않는다.

### **ERD**  
시스템에 어떤 엔티티들이 존재하며 그들 간에 어떤 관계가 있는지를 나타내는 다이어그램  

ERD 표기방식  
- Peter Chen  
주로 대학교재에서 사용하는 표기법, 실무에서는 거의 사용하지 않음  

- IDEFIX  
실무에서 사용하는 경우도 있음, ERWin에서 사용되는 모델  

- `IE/Crow's Foot`  
까마귀발 표기법이라고도 부르며 가장 많이 사용한다. ERWin에서 사용되는 모델
- Min-Max/ISO  
각 엔티티의 참여도를 좀 더 상세하게 나타내는 표기법
- UML  
소프트웨어 공학에서 주로 사용되는 모델
- Case*Method/Barker  
Oracle에서 사용되는 모델


### **ERD 작성 순서**  
어떤 표기법을 사용하든 ERD를 작성하는 순서는 공통된 규칙을 따른다.  
1. 엔티티를 도출하고 그린다.
2. 엔티티를 적절하게 배치한다. 
3. 엔티티 간의 관계를 설정한다.  
4. 관계명을 기입한다. 
5. 관계의 참여도를 기입한다.  
6. 관계의 필수/선택 여부를 기입한다. 

## 엔티티

### 엔티티란?
사전적 의미로는 독립체라는 의미  
데이터베이스에서 엔티티는 식별이 가능한 객체라는 의미

Tip.
`엔티티: Table` `인스턴스: Row` `속성: Columm`




### 엔티티의 특징
- 업무에서 쓰이는 정보여야 함
- 유니크함을 보장할 수 있는 식별자가 있어야 함
- 2개 이상의 인스턴스를 가지고 있어야 함
- 반드시 속성을 가지고 있어야 함
- 반드시 속성을 가지고 있어야 함
- 다른 엔티티와 1개 이상의 관계를 가지고 있어야 함

### 엔티티의 분류

유형 vs 무형
- 유형 엔티티: 물리적인 형태로 존재, 안정적, 지속적
- 개념 엔티티: 물리적인 형태 없음, 개념적
- 사건 엔티티: 행위를 함으로써 발생, 빈번함, 통계 자료로 이용가능  

발생시점
- 기본 엔티티: 독립적으로 생성됨, 자식 엔티티를 가질 수 있음
- 중심 엔티티: 기본 엔티티로부터 파생, 행위 엔티티 생성, 데이터의 양이 많이 발생
- 행위 엔티티: 2개 이상의 엔티티로 부터 파생, 데이터가 자주 변경되거나 증가 할 수 있음


### 엔티티의 이름을 정할 때 주의점
- 업무에서 실제로 쓰이는 용어 사용
- 한글은 약어를 사용하지 않고 영문은 대문자로 표기
- 단수 명사로 표현하고 띄어쓰기는 하지 않음
- 다른 엔티티와 의미상으로 중복될 수 없음(주문, 결제 엔티티는 중복될 수 있음)
- 해당 엔티티가 갖고 있는 데이터가 무엇인지 명확하게 표현



## 속성
속성은 의미상 더 이상 쪼개지지 않는 수준이어야 하며 프로세스에 칠요한 항목이어야 한다.  
업무상 불필요한 속성은 삭제하는 것이 바람직 하다.

### 속성 값
각각의 속성은 속성값을 가지며 속성값은 엔티티에 속한 하나의 인스턴스를 구체적으로 나타내주는 데이터라고 볼 수 있다.  
하나의 속성은 한 개의 속성값만 가질 수 있다.  
만약 하나의 속성이 여러 개의 속성 값을 갖는 경우 별도의 엔티티로 분리하는 것이 바람직하다.


### 엔티티, 인스턴스. 속성, 속성값의 관계
- 한 개의 엔티티는 두 개 이상의 인스턴스를 갖는다. 
- 한 개의 인스턴스는 두 개 이상의 속성을 갖는다.
- 한 개의 속성은 하나의 속성 값을 갖는다. 


### 분류
**특성에 따른 분류**
- `기본속성`  
가장 일반적인 속성으로 업무 프로세스 분석을 통해 바로 정의가 가능한 속성  

- `설계속성`  
업무에 존재하지는 않지만 설계 과정에서 합리적인 모델링을 위해 만들어진 속성 (학생의 유니크함을 보장하기위해 `학번`이라는 속성을 부여하는 경우)  

- `파생속성`  
다른 속성으로부터 파생된 속성 (계산된 값, 가공된 값)


**구성방식에 따른 분류**  

`PK`  
엔티티에 속산 각 인스턴스에 유니크함을 부여하는 속성  

`FK`  
다른 엔티티와 관계를 맺게 해주는 매개체 역할을 하는 속성  

`일반 속성`  
PK, FK를 제외한 나머지 속성

### 도메인
`도메인`  
속성이 가질 수 있는 속성값의 범위


## 관계
엔티티와 엔티티와의 관계를 의미하며 어떠한 연관성이 있는지 타입을 분류하여 `존재 관계`와 `행위 관계`로 나눌 수 있다.

`존재 관계`  
존재 자체로 연관성이 있는 관계 (직원과 부서)  
  

`행위 관계`  
특정한 행위를 함으로써 연관성이 생기는 관계 (회원과 주문)


### 표기법
`관계명`  
관계의 이름, 각 엔티티의 관점에서 관계명을 하나씩 가지기 때문에 모든 관계는 두개의 관계명을 가진다.   

`관계차수`  
관계에 참여하는 수, 1:1, 1:N, N:N  

`관계 선택사양`  
필수인지 선택인지의 여부, 필수적 관계, 선택적 관계


## 식별자
### 주 식별자(PK)
유일성: 각 인스턴스에 유니크함을 부여해 식별가능하게 한다.  

최소성: 유일성을 보장하는 최소 개수의 속성이어야 한다.

불변성: 속성값이 되도록 변하지 않아야 한다. 

존재성: NOTNULL

### 분류
- 대표성 여부  
    - `주 식별자(Primary)`  
    유일성, 최소성, 불변성, 존재성을 가진 대표 식별자  
    다른 엔티티와 참조관계로 연결  

    - `보조 식별자(Alternate)`  
    인스턴스를 식별할 수는 있지만 대표식별자가 아님  
    다른 엔티티와 참조관계로 연결되지 않음

- 스스로 생성되었는지 여부  
    - `내부 식별자`  
    엔티티 내부에서 스스로 생성된 식별자    

    - `외부 식별자`  
    다른 엔티티에서 온 식별자

-  단일 속성의 여부
    - `단일 식별자`  
    하나의 속성으로 구성된 식별자  

    - `복합 식별자`  
    두 개 이상의 속성으로 구성된 식별자

- 대체 여부  
    - `원조 식별자`  
    업무 프로세스에 존재하는 식별자 (가공되지 않음)  

    - `대리 식별자`  
    주 식별자의 속성이 두 개 이상인 경우 그 속성들을 하나로 묶어서 사용하는 식별자


### 식별자 관계, 비 식별자 관계
`식별자 관계`  
부모 엔티티의 식별자가 자식엔티티의 주 식별자가 되는 관계 (1:1 혹은 1:N)

`비식별자 관계`  
부모 엔티티의 식별자가 자식 엔티티의 주식별자가 아닌 일반속성이 되는 관계 (NULLABLE)
